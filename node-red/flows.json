[
    {
        "id": "4e22cb1cfa902d3c",
        "type": "tab",
        "label": "Main",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "4ca5f7c94488b66a",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 10,
                "gy": 10,
                "cx": 6,
                "cy": 6,
                "px": 4,
                "py": 4
            }
        }
    },
    {
        "id": "7b0bd463e3250132",
        "type": "ui_tab",
        "name": "FoodSchedule",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "781ac152bb694f16",
        "type": "ui_group",
        "name": "Login form",
        "tab": "ce5ab49963467673",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "59ed651b2ccf91aa",
        "type": "ui_group",
        "name": "Food capacity",
        "tab": "fa03995da56e803e",
        "order": 1,
        "disp": true,
        "width": 9,
        "collapse": false,
        "className": ""
    },
    {
        "id": "457669cf121f2326",
        "type": "ui_group",
        "name": "Temperature",
        "tab": "fa03995da56e803e",
        "order": 2,
        "disp": true,
        "width": 8,
        "collapse": false,
        "className": ""
    },
    {
        "id": "3e75d3f7611fd738",
        "type": "ui_group",
        "name": "Food consumption",
        "tab": "fa03995da56e803e",
        "order": 4,
        "disp": true,
        "width": 17,
        "collapse": false,
        "className": ""
    },
    {
        "id": "c67eb2ed437d0cbf",
        "type": "ui_group",
        "name": "Profile",
        "tab": "e6b7a06246b867a9",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a4f453e6cef8b789",
        "type": "ui_group",
        "name": "Update",
        "tab": "e6b7a06246b867a9",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ca32dfb2ec8ab7f1",
        "type": "ui_group",
        "name": "Email",
        "tab": "b04556f58b734d6e",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bc6151c1fb37c908",
        "type": "ui_group",
        "name": "Buzzer",
        "tab": "8acf4cd8dcadb6ca",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "0d1a2c0b7eda5eb1",
        "type": "ui_group",
        "name": "Current",
        "tab": "7b0bd463e3250132",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ce5ab49963467673",
        "type": "ui_tab",
        "name": "Login",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fa03995da56e803e",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e6b7a06246b867a9",
        "type": "ui_tab",
        "name": "Profile",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "b04556f58b734d6e",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "8acf4cd8dcadb6ca",
        "type": "ui_tab",
        "name": "Device",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "765ac9edbab7f418",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.hivemq.com",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "b7dc2792b95da7d1",
        "type": "ui_group",
        "name": "Light",
        "tab": "8acf4cd8dcadb6ca",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bf126c3444189feb",
        "type": "ui_group",
        "name": "Lid",
        "tab": "8acf4cd8dcadb6ca",
        "order": 3,
        "disp": true,
        "width": 6,
        "collapse": false,
        "className": ""
    },
    {
        "id": "aa2c7da12e1086a2",
        "type": "ui_group",
        "name": "Feed",
        "tab": "8acf4cd8dcadb6ca",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "07c0afe64b480570",
        "type": "ui_group",
        "name": "Update",
        "tab": "7b0bd463e3250132",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e9376441b65f8fa6",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.hivemq.com",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "494a9fd41ac89a9d",
        "type": "ui_group",
        "name": "EmailUpdate",
        "tab": "b04556f58b734d6e",
        "order": 2,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "6b19a6192710be8b",
        "type": "ui_group",
        "name": "PasswordUpdate",
        "tab": "b04556f58b734d6e",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "851fee28e1842b00",
        "type": "ui_group",
        "name": "PinUpdate",
        "tab": "b04556f58b734d6e",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "11fbed7ab203ea7d",
        "type": "ui_group",
        "name": "EmailUpdate",
        "tab": "b04556f58b734d6e",
        "order": 2,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "50a854303ebca012",
        "type": "ui_group",
        "name": "PasswordUpdate",
        "tab": "b04556f58b734d6e",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ae58e03e508736ac",
        "type": "ui_group",
        "name": "PinUpdate",
        "tab": "b04556f58b734d6e",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2119f505594bdcc1",
        "type": "mongodb3",
        "uri": "mongodb+srv://iot:hcmusiot@hcmusiot.gfzjc3f.mongodb.net/?retryWrites=true&w=majority",
        "name": "smart_pet_feeder",
        "options": "",
        "parallelism": "-1"
    },
    {
        "id": "a22b152c67ed51aa",
        "type": "ui_spacer",
        "z": "4e22cb1cfa902d3c",
        "name": "spacer",
        "group": "ca32dfb2ec8ab7f1",
        "order": 4,
        "width": 3,
        "height": 1
    },
    {
        "id": "e1b2f28cadf0739b",
        "type": "ui_group",
        "name": "EmailUpdate",
        "tab": "b04556f58b734d6e",
        "order": 2,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "fc552e0932124d1c",
        "type": "ui_group",
        "name": "PasswordUpdate",
        "tab": "b04556f58b734d6e",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "6534e412951b1e64",
        "type": "ui_group",
        "name": "PinUpdate",
        "tab": "b04556f58b734d6e",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "3dc8a4f82ddd9296",
        "type": "mongodb3",
        "uri": "mongodb+srv://iot:hcmusiot@hcmusiot.gfzjc3f.mongodb.net/?retryWrites=true&w=majority",
        "name": "smart_pet_feeder",
        "options": "",
        "parallelism": "-1"
    },
    {
        "id": "2816272a64fc4c08",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "LOGIN",
        "info": "",
        "x": 230,
        "y": 140,
        "wires": []
    },
    {
        "id": "2b367815778bf8cd",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Trigger login form at start",
        "func": "msg.payload = {\n    \"tab\": \"Login\",\n    \"tabs\": {\n        \"show\": [\"Login\"],\n        \"hide\": [\"Home\", \"Profile\", \"Food schedule\", \"Settings\", \"Device\"]\n    }\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 200,
        "wires": [
            [
                "82607d207091054b"
            ]
        ]
    },
    {
        "id": "82607d207091054b",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 740,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "89be8806d1a1b37c",
        "type": "ui_form",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "",
        "group": "781ac152bb694f16",
        "order": 0,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Username",
                "value": "username",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Password",
                "value": "password",
                "type": "password",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "username": "",
            "password": ""
        },
        "payload": "",
        "submit": "Login",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 290,
        "y": 280,
        "wires": [
            [
                "0ac724362278786c"
            ]
        ]
    },
    {
        "id": "0ac724362278786c",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Authenticate",
        "func": "if (msg.payload.username == flow.get(\"username\") && msg.payload.password == flow.get(\"password\"))\n    msg.payload.isValid = 1;\nelse msg.payload.isValid = 0;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 280,
        "wires": [
            [
                "7888431c9bdea40a"
            ]
        ]
    },
    {
        "id": "08a62f02fc50e09a",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 330,
        "y": 200,
        "wires": [
            [
                "2b367815778bf8cd",
                "5a4fcaa9d67b71ac"
            ]
        ]
    },
    {
        "id": "7888431c9bdea40a",
        "type": "switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "property": "payload.isValid",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 280,
        "wires": [
            [
                "8f1968d971299c68",
                "8d457a6b868ebb40"
            ],
            [
                "46f9dca65285fc21"
            ]
        ]
    },
    {
        "id": "8f1968d971299c68",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Show tabs and disable Login",
        "func": "msg.payload = {\n    \"tab\": \"Home\",\n    \"tabs\": {\n        \"hide\": [\"Login\"],\n        \"show\": [\"Home\", \"Profile\", \"Food schedule\", \"Settings\", \"Device\"],\n    }\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 280,
        "wires": [
            [
                "df9ab07d2167bf6f"
            ]
        ]
    },
    {
        "id": "5854417a795c7c32",
        "type": "ui_toast",
        "z": "4e22cb1cfa902d3c",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Authentication failed",
        "name": "",
        "x": 1030,
        "y": 360,
        "wires": []
    },
    {
        "id": "df9ab07d2167bf6f",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 1080,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "b6395b41c4713ac5",
        "type": "ui_toast",
        "z": "4e22cb1cfa902d3c",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Login successfully",
        "name": "",
        "x": 1010,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "8d457a6b868ebb40",
        "type": "change",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Welcome back!!!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 320,
        "wires": [
            [
                "b6395b41c4713ac5"
            ]
        ]
    },
    {
        "id": "46f9dca65285fc21",
        "type": "change",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Invalid username or password!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 360,
        "wires": [
            [
                "5854417a795c7c32"
            ]
        ]
    },
    {
        "id": "c785a2a65f726dde",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "HOME",
        "info": "",
        "x": 130,
        "y": 560,
        "wires": []
    },
    {
        "id": "280ecdef0fa89293",
        "type": "ui_gauge",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "59ed651b2ccf91aa",
        "order": 1,
        "width": 9,
        "height": 6,
        "gtype": "wave",
        "title": "Food Remaining",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 460,
        "y": 580,
        "wires": []
    },
    {
        "id": "bf495db116dacd36",
        "type": "ui_gauge",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "457669cf121f2326",
        "order": 2,
        "width": 4,
        "height": 6,
        "gtype": "donut",
        "title": "Humidity",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 450,
        "y": 640,
        "wires": []
    },
    {
        "id": "c338781ad5883467",
        "type": "ui_gauge",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "457669cf121f2326",
        "order": 1,
        "width": 4,
        "height": 6,
        "gtype": "gage",
        "title": "Temperature",
        "label": "℃",
        "format": "{{value}}",
        "min": "-40",
        "max": "80",
        "colors": [
            "#d53434",
            "#13d83a",
            "#ca3838"
        ],
        "seg1": "15",
        "seg2": "35",
        "diff": false,
        "className": "",
        "x": 440,
        "y": 700,
        "wires": []
    },
    {
        "id": "1076fc9a181583c0",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "FOOD SCHEDULE",
        "info": "",
        "x": 130,
        "y": 1100,
        "wires": []
    },
    {
        "id": "d0da8498072b3b83",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "PET PROFILE",
        "info": "",
        "x": 180,
        "y": 3880,
        "wires": []
    },
    {
        "id": "57e365b9fdfea4e3",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "c67eb2ed437d0cbf",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Name:",
        "format": "{{msg.payload.name}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 770,
        "y": 3880,
        "wires": []
    },
    {
        "id": "973578b6a7a029a8",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "c67eb2ed437d0cbf",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Date of birth:",
        "format": "{{msg.payload.dob}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 790,
        "y": 3940,
        "wires": []
    },
    {
        "id": "9cf897ab4589921d",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "x": 110,
        "y": 3960,
        "wires": [
            [
                "8841c5dc58b9a091",
                "63c4bf9c9ef69939"
            ]
        ]
    },
    {
        "id": "a78ec4d9a136b4f3",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "c67eb2ed437d0cbf",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Weight:",
        "format": "{{msg.payload.weight}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 780,
        "y": 3980,
        "wires": []
    },
    {
        "id": "c6121a2072e9144e",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "c67eb2ed437d0cbf",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Breed:",
        "format": "{{msg.payload.breed}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 770,
        "y": 4020,
        "wires": []
    },
    {
        "id": "f0c6f6a00715f84b",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "c67eb2ed437d0cbf",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Color: ",
        "format": "{{msg.payload.color}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 770,
        "y": 4060,
        "wires": []
    },
    {
        "id": "4cd3a0f1ea0af9ac",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "c67eb2ed437d0cbf",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Update information",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 210,
        "y": 4240,
        "wires": [
            [
                "f677ec470dcdef22"
            ]
        ]
    },
    {
        "id": "bc4982acbb539bd2",
        "type": "ui_form",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Enter new information",
        "group": "a4f453e6cef8b789",
        "order": 7,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Name",
                "value": "name",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Date of birth",
                "value": "dob",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Weight",
                "value": "weight",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Breed",
                "value": "breed",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Color",
                "value": "color",
                "type": "text",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "name": "",
            "dob": "",
            "weight": "",
            "breed": "",
            "color": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": true,
        "className": "",
        "x": 220,
        "y": 4200,
        "wires": [
            [
                "2a387f9a314cf220",
                "97ddd529a925730f"
            ]
        ]
    },
    {
        "id": "f677ec470dcdef22",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Switch to update screen",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Profile_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 4240,
        "wires": [
            [
                "63b96b3e2652e57f"
            ]
        ]
    },
    {
        "id": "63b96b3e2652e57f",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 740,
        "y": 4240,
        "wires": [
            []
        ]
    },
    {
        "id": "8841c5dc58b9a091",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"Profile_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 4060,
        "wires": [
            [
                "e46ca509846b225e"
            ]
        ]
    },
    {
        "id": "e46ca509846b225e",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 520,
        "y": 4060,
        "wires": [
            []
        ]
    },
    {
        "id": "2a387f9a314cf220",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"Profile_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4200,
        "wires": [
            [
                "03f574c925feb691"
            ]
        ]
    },
    {
        "id": "03f574c925feb691",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 700,
        "y": 4200,
        "wires": [
            []
        ]
    },
    {
        "id": "8ea0eb9cd9b7d76e",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "DEVICE MANAGER",
        "info": "",
        "x": 130,
        "y": 1720,
        "wires": []
    },
    {
        "id": "7e075f5644290b0a",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "SETTINGS",
        "info": "",
        "x": 340,
        "y": 2740,
        "wires": []
    },
    {
        "id": "c536266a8842b86a",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload.email",
                "v": "choGthinh@dbrr.com",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "x": 470,
        "y": 2780,
        "wires": [
            [
                "98cbee78faa3644c",
                "eb99606616ecd2c7"
            ]
        ]
    },
    {
        "id": "769ecdf46e9eeade",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "ca32dfb2ec8ab7f1",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Email: ",
        "format": "{{msg.payload.email}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 1090,
        "y": 2780,
        "wires": []
    },
    {
        "id": "6172e2e6cadb21a7",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Change email",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1280,
        "y": 3120,
        "wires": [
            [
                "19c90961223048ad"
            ]
        ]
    },
    {
        "id": "7dc659c88adef05d",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "ca32dfb2ec8ab7f1",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Notification",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 1090,
        "y": 2820,
        "wires": []
    },
    {
        "id": "6a0cd1d0ffb0b87f",
        "type": "ui_switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "On / Off",
        "tooltip": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1280,
        "y": 2840,
        "wires": [
            [
                "25acee4a6a7bc1ac"
            ]
        ]
    },
    {
        "id": "d120d19685d3f52b",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "buzzer/trigger",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1340,
        "y": 1780,
        "wires": []
    },
    {
        "id": "42c433ae335ebd0f",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "bc6151c1fb37c908",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Trigger the buzzer",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "trigger buzzer",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 830,
        "y": 1640,
        "wires": [
            [
                "d719be899bddc60b"
            ]
        ]
    },
    {
        "id": "2d3d773e94945e2d",
        "type": "ui_switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Mute sound",
        "tooltip": "",
        "group": "bc6151c1fb37c908",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 930,
        "y": 1780,
        "wires": [
            [
                "6827dfcf40d20dd1",
                "eaf614e9e264fe06"
            ]
        ]
    },
    {
        "id": "666adf77ecd89530",
        "type": "ui_slider",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Light slider",
        "tooltip": "",
        "group": "b7dc2792b95da7d1",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "topic",
        "topicType": "msg",
        "min": "0",
        "max": 10,
        "step": 1,
        "className": "",
        "x": 750,
        "y": 1880,
        "wires": [
            [
                "b17410a9490b928c",
                "ca6bab17e41bc5e4",
                "fc9758fbd2eb998e"
            ]
        ]
    },
    {
        "id": "b17410a9490b928c",
        "type": "ui_gauge",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "b7dc2792b95da7d1",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "compass",
        "title": "Light",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 930,
        "y": 1840,
        "wires": []
    },
    {
        "id": "c439ae994fd15324",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "home/data",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 810,
        "y": 640,
        "wires": []
    },
    {
        "id": "4b1ee50c664903b9",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 650,
        "y": 640,
        "wires": [
            [
                "c439ae994fd15324"
            ]
        ]
    },
    {
        "id": "ca6bab17e41bc5e4",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "light/set",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 940,
        "y": 1900,
        "wires": []
    },
    {
        "id": "c912c6dc5f49a3a5",
        "type": "ui_toast",
        "z": "4e22cb1cfa902d3c",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Enter the PIN code",
        "name": "Ask for PIN",
        "x": 790,
        "y": 2060,
        "wires": [
            [
                "980caa8119a29995"
            ]
        ]
    },
    {
        "id": "1f87d8e6a9cca463",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Open message",
        "func": "msg.payload = \"You are about to open the lid\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 2060,
        "wires": [
            [
                "c912c6dc5f49a3a5"
            ]
        ]
    },
    {
        "id": "980caa8119a29995",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Check PIN code",
        "func": "if (msg.payload == flow.get('pin')) {\n// if (msg.payload == \"123\") {\n    msg.payload = true;\n}\nelse msg.payload = false;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 2060,
        "wires": [
            [
                "31ceea8ce53a7090"
            ]
        ]
    },
    {
        "id": "1d449a5198e1ba39",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "bf126c3444189feb",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Open / Close the lid",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "lid",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 90,
        "y": 2080,
        "wires": [
            [
                "970529ead3938b2d"
            ]
        ]
    },
    {
        "id": "31ceea8ce53a7090",
        "type": "switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1150,
        "y": 2060,
        "wires": [
            [
                "9efd4b90edaa8c3e",
                "16c3bfbcd1cbe00c",
                "34e62355659580f7"
            ],
            [
                "6cb545f65a364b47"
            ]
        ]
    },
    {
        "id": "9efd4b90edaa8c3e",
        "type": "ui_toast",
        "z": "4e22cb1cfa902d3c",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Operation successfully completed",
        "name": "",
        "x": 1370,
        "y": 2100,
        "wires": []
    },
    {
        "id": "6cb545f65a364b47",
        "type": "ui_toast",
        "z": "4e22cb1cfa902d3c",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Invalid PIN code",
        "name": "",
        "x": 1370,
        "y": 2180,
        "wires": []
    },
    {
        "id": "59b51831cd2f787b",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "bf126c3444189feb",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Feed your pet",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 140,
        "y": 2160,
        "wires": [
            [
                "e39e00837407f554"
            ]
        ]
    },
    {
        "id": "16c3bfbcd1cbe00c",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "lid/open",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1340,
        "y": 2140,
        "wires": []
    },
    {
        "id": "e39e00837407f554",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "feed",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 330,
        "y": 2160,
        "wires": []
    },
    {
        "id": "629c713676028e51",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 1160,
        "wires": [
            [
                "9890d33c5c83626d",
                "39dd80546f7adc11"
            ]
        ]
    },
    {
        "id": "f74d4c1fe890934f",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "0d1a2c0b7eda5eb1",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "12:00 - 14:00",
        "format": "{{msg.payload.time1}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1280,
        "wires": []
    },
    {
        "id": "455c99ca9c913d69",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "0d1a2c0b7eda5eb1",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "8:00 - 10:00",
        "format": "{{msg.payload.time0}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1240,
        "wires": []
    },
    {
        "id": "704d9ae03cecd6ab",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "0d1a2c0b7eda5eb1",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "20:00 - 22:00",
        "format": "{{msg.payload.time3}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1360,
        "wires": []
    },
    {
        "id": "244581b70adecd05",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "0d1a2c0b7eda5eb1",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "16:00 - 18:00",
        "format": "{{msg.payload.time2}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1320,
        "wires": []
    },
    {
        "id": "5af65ddd200a64c8",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "0d1a2c0b7eda5eb1",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Update Schedule",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 250,
        "y": 1560,
        "wires": [
            [
                "e8db2150923eaaf9"
            ]
        ]
    },
    {
        "id": "9890d33c5c83626d",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"FoodSchedule_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1120,
        "wires": [
            [
                "abc973c7ac33c4f1"
            ]
        ]
    },
    {
        "id": "abc973c7ac33c4f1",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 620,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "e8db2150923eaaf9",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set update form visible",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"FoodSchedule_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1540,
        "wires": [
            [
                "479e41d7c77e2b1c"
            ]
        ]
    },
    {
        "id": "479e41d7c77e2b1c",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 680,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "3d659979e4a4857f",
        "type": "ui_form",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Update Food Schedule",
        "group": "07c0afe64b480570",
        "order": 0,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "8:00 - 10:00",
                "value": "time0",
                "type": "number",
                "required": false,
                "rows": null
            },
            {
                "label": "12:00 - 14:00",
                "value": "time1",
                "type": "number",
                "required": false,
                "rows": null
            },
            {
                "label": "16:00 - 18:00",
                "value": "time2",
                "type": "number",
                "required": false,
                "rows": null
            },
            {
                "label": "20:00 - 22:00",
                "value": "time3",
                "type": "number",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "time0": "",
            "time1": "",
            "time2": "",
            "time3": ""
        },
        "payload": "",
        "submit": "update",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 180,
        "y": 1360,
        "wires": [
            [
                "b7726671f81b18e7",
                "455c99ca9c913d69",
                "f74d4c1fe890934f",
                "244581b70adecd05",
                "704d9ae03cecd6ab",
                "f87e4a670ec2bd2a"
            ]
        ]
    },
    {
        "id": "b7726671f81b18e7",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"FoodSchedule_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 1420,
        "wires": [
            [
                "9d418610f80f8bd4"
            ]
        ]
    },
    {
        "id": "9d418610f80f8bd4",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 740,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "98cece7c30fdac98",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "schedule/set",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e9376441b65f8fa6",
        "x": 950,
        "y": 1180,
        "wires": []
    },
    {
        "id": "a9055fbbe6cfd38c",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Split data",
        "func": "var msgList = [];\nmsgList.push({payload: msg.payload.time0});\nmsgList.push({payload: msg.payload.time1});\nmsgList.push({payload: msg.payload.time2});\nmsgList.push({payload: msg.payload.time3});\nreturn [msgList];",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 1180,
        "wires": [
            [
                "98cece7c30fdac98"
            ]
        ]
    },
    {
        "id": "059111b0ad3bbdf2",
        "type": "debug",
        "z": "4e22cb1cfa902d3c",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 1120,
        "wires": []
    },
    {
        "id": "1c5f5c5b044c3714",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "home/foodConsumed",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e9376441b65f8fa6",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 820,
        "wires": [
            [
                "065de421f5a82c21"
            ]
        ]
    },
    {
        "id": "a5cbf7e7580b0713",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set notification",
        "func": "if (msg.payload.noti == 1) msg.payload = true;\nelse msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 2860,
        "wires": [
            [
                "6a0cd1d0ffb0b87f"
            ]
        ]
    },
    {
        "id": "3c2c44178818d609",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "ca32dfb2ec8ab7f1",
        "order": 3,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Username: ",
        "format": "{{msg.payload.username}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 1110,
        "y": 2920,
        "wires": []
    },
    {
        "id": "ceb0ca58e5677bb4",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "ca32dfb2ec8ab7f1",
        "order": 7,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Password: ",
        "format": "{{msg.payload.password}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 1090,
        "y": 2980,
        "wires": []
    },
    {
        "id": "b45920d2739a8ee9",
        "type": "ui_text",
        "z": "4e22cb1cfa902d3c",
        "group": "ca32dfb2ec8ab7f1",
        "order": 9,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "PIN code: ",
        "format": "{{msg.payload.pin}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 1060,
        "y": 3040,
        "wires": []
    },
    {
        "id": "b0efda6ff1cc98f5",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 8,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Change password",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1290,
        "y": 3200,
        "wires": [
            [
                "d85e737c4afd368e"
            ]
        ]
    },
    {
        "id": "016c0295c1195a25",
        "type": "ui_button",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Change PIN",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 1290,
        "y": 3280,
        "wires": [
            [
                "07ec49840ab10bf3"
            ]
        ]
    },
    {
        "id": "ce2dbc128436d335",
        "type": "ui_form",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Change email",
        "group": "e1b2f28cadf0739b",
        "order": 11,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Email",
                "value": "email",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "email": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 320,
        "y": 3120,
        "wires": [
            [
                "686cecd3d9e79759"
            ]
        ]
    },
    {
        "id": "be8b53f25732bd96",
        "type": "ui_form",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Change password",
        "group": "fc552e0932124d1c",
        "order": 12,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "New password",
                "value": "password",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "password": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 290,
        "y": 3240,
        "wires": [
            [
                "429c816541d88348"
            ]
        ]
    },
    {
        "id": "6853b5baf9f7ac60",
        "type": "ui_form",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "label": "Change PIN code",
        "group": "6534e412951b1e64",
        "order": 13,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "New PIN code",
                "value": "pin",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "pin": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 290,
        "y": 3360,
        "wires": [
            [
                "88bd339fb785a36b"
            ]
        ]
    },
    {
        "id": "98cbee78faa3644c",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Hide update forms ",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"Settings_EmailUpdate\", \"Settings_PasswordUpdate\", \"Settings_PinUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 2940,
        "wires": [
            [
                "e6619c5bf192327e"
            ]
        ]
    },
    {
        "id": "e6619c5bf192327e",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 800,
        "y": 2980,
        "wires": [
            []
        ]
    },
    {
        "id": "19c90961223048ad",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Unhide email form",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Settings_EmailUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 3120,
        "wires": [
            [
                "1904cb96e8387369"
            ]
        ]
    },
    {
        "id": "1904cb96e8387369",
        "type": "ui_ui_control",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "events": "all",
        "x": 1800,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "d85e737c4afd368e",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Unhide password form",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Settings_PasswordUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 3200,
        "wires": [
            [
                "1904cb96e8387369"
            ]
        ]
    },
    {
        "id": "07ec49840ab10bf3",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Unhide PIN form",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Settings_PinUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1540,
        "y": 3280,
        "wires": [
            [
                "1904cb96e8387369"
            ]
        ]
    },
    {
        "id": "686cecd3d9e79759",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set new email",
        "func": "flow.set(\"email\", msg.payload.email);\nmsg.payload = [{id: \"1\"}, {$set: {\"email\": msg.payload.email}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 3100,
        "wires": [
            [
                "769ecdf46e9eeade",
                "b87eddcdc0abe3c4"
            ]
        ]
    },
    {
        "id": "429c816541d88348",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set new password",
        "func": "flow.set(\"password\", msg.payload.password);\nmsg.payload = [{id: \"1\"}, {$set: {\"password\": msg.payload.password}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 3240,
        "wires": [
            [
                "ceb0ca58e5677bb4",
                "f6d1604dca4fe0a1"
            ]
        ]
    },
    {
        "id": "88bd339fb785a36b",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set new pin",
        "func": "flow.set(\"pin\", msg.payload.pin);\nmsg.payload = [{id: \"1\"}, {$set: {\"pin\": msg.payload.pin}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 3360,
        "wires": [
            [
                "b45920d2739a8ee9",
                "7e20b145f87391d6"
            ]
        ]
    },
    {
        "id": "edda03375f18e3dd",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set Auth Data",
        "func": "flow.set(\"username\", msg.payload.username);\nflow.set(\"password\", msg.payload.password);\nflow.set(\"email\", msg.payload.email);\nflow.set(\"pin\", msg.payload.pin);\nflow.set(\"noti\", msg.payload.noti);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 2740,
        "wires": [
            [
                "35201eb19286dc11"
            ]
        ]
    },
    {
        "id": "25acee4a6a7bc1ac",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set new noti",
        "func": "flow.set(\"noti\", msg.payload);\nmsg.payload = [{id: \"1\"}, {$set: {\"noti\": msg.payload}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 2820,
        "wires": [
            [
                "751db2a9c68dbbb8"
            ]
        ]
    },
    {
        "id": "45c31bf123404a78",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "alert/food",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 4660,
        "wires": [
            [
                "a5c10c8ba856f8fa"
            ]
        ]
    },
    {
        "id": "7e92730b8ea72b9d",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "alert/env",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 4780,
        "wires": [
            [
                "a5c10c8ba856f8fa"
            ]
        ]
    },
    {
        "id": "aa3af9f4b191f3ab",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Setup email",
        "func": "msg.payload = \"The device is running low on supplies. Can you please restock it at your earliest convenience?\";\nmsg.topic = \"FOOD RUNNING OUT\";\nmsg.to = flow.get(\"email\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 4660,
        "wires": [
            [
                "8f9cf5006e627c83",
                "c7710a8116821fa2"
            ]
        ]
    },
    {
        "id": "77d959a529d1787d",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Setup email",
        "func": "msg.payload = \"It seems like the temperature or humidity levels are a bit extreme. You might want to check on things and make adjustments if needed.\";\nmsg.topic = \"TEMPERATURE AND HUMIDITY LEVELS DETECTED OUTSIDE NORMAL RANGE\";\nmsg.to = flow.get(\"email\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 4780,
        "wires": [
            [
                "75eb021208c58ac0"
            ]
        ]
    },
    {
        "id": "8b429b231a3545e0",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 480,
        "y": 4580,
        "wires": [
            [
                "aa3af9f4b191f3ab"
            ]
        ]
    },
    {
        "id": "c7710a8116821fa2",
        "type": "debug",
        "z": "4e22cb1cfa902d3c",
        "name": "debug 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 4580,
        "wires": []
    },
    {
        "id": "35201eb19286dc11",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "function 4",
        "func": "msg.payload = flow.get(\"email\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1200,
        "y": 2740,
        "wires": [
            []
        ]
    },
    {
        "id": "cc49065599626f63",
        "type": "switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 4700,
        "wires": [
            [
                "aa3af9f4b191f3ab",
                "77d959a529d1787d"
            ],
            []
        ]
    },
    {
        "id": "a5c10c8ba856f8fa",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Check notification is turn on or not",
        "func": "msg.payload = flow.get(\"noti\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 4700,
        "wires": [
            [
                "cc49065599626f63",
                "ea553dfbb5c8071d"
            ]
        ]
    },
    {
        "id": "8f9cf5006e627c83",
        "type": "e-mail",
        "z": "4e22cb1cfa902d3c",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "Send email",
        "x": 1010,
        "y": 4740,
        "wires": []
    },
    {
        "id": "75eb021208c58ac0",
        "type": "e-mail",
        "z": "4e22cb1cfa902d3c",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "Send email",
        "x": 990,
        "y": 4840,
        "wires": []
    },
    {
        "id": "39dd80546f7adc11",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Read Schedule",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1240,
        "wires": [
            [
                "e7d381f0e6559f9f"
            ]
        ]
    },
    {
        "id": "f87e4a670ec2bd2a",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Update Schedule",
        "func": "var msgdata = {}\n\nvar updateData = {};\n\nif(msg.payload.time0 != null){\n    updateData.time0 = msg.payload.time0;\n}\nif(msg.payload.time1 != null){\n    updateData.time1 = msg.payload.time1;\n}\nif(msg.payload.time2 != null){\n    updateData.time2 = msg.payload.time2;\n}\nif(msg.payload.time3 != null){\n    updateData.time3 = msg.payload.time3;\n}\n\nmsgdata.operation = \"updateOne\";\nmsgdata.payload = [{id: \"1\"}, {$set: updateData}];\nreturn msgdata;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1480,
        "wires": [
            [
                "670b100f40ffd51e"
            ]
        ]
    },
    {
        "id": "63c4bf9c9ef69939",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Read Profile",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 3980,
        "wires": [
            [
                "a24ced64744d1985"
            ]
        ]
    },
    {
        "id": "97ddd529a925730f",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Update Profile",
        "func": "var msgdata = {}\n\nvar updateData = {};\n\nif(msg.payload.name != \"\"){\n    updateData.name = msg.payload.name;\n}\nif(msg.payload.dob != \"\"){\n    updateData.dob = msg.payload.dob;\n}\nif(msg.payload.weight != \"\"){\n    updateData.weight = msg.payload.weight;\n}\nif(msg.payload.breed != \"\"){\n    updateData.breed = msg.payload.breed;\n}\nif (msg.payload.color != \"\"){\n    updateData.color = msg.payload.color;\n}\n\nmsgdata.operation = \"updateOne\";\nmsgdata.payload = [{id: \"1\"}, {$set: updateData}];\nreturn msgdata;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 4160,
        "wires": [
            [
                "b9fe3e9b4c254052"
            ]
        ]
    },
    {
        "id": "a7b2b162666179a9",
        "type": "comment",
        "z": "4e22cb1cfa902d3c",
        "name": "SEND MAIL",
        "info": "",
        "x": 250,
        "y": 4540,
        "wires": []
    },
    {
        "id": "e7d381f0e6559f9f",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "schedule",
        "collection": "schedule",
        "operation": "",
        "x": 580,
        "y": 1240,
        "wires": [
            [
                "455c99ca9c913d69",
                "f74d4c1fe890934f",
                "244581b70adecd05",
                "704d9ae03cecd6ab",
                "a9055fbbe6cfd38c"
            ]
        ]
    },
    {
        "id": "670b100f40ffd51e",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "schedule",
        "collection": "schedule",
        "operation": "",
        "x": 700,
        "y": 1480,
        "wires": [
            [
                "c8840c060619242c"
            ]
        ]
    },
    {
        "id": "a24ced64744d1985",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "profile",
        "collection": "profile",
        "operation": "",
        "x": 470,
        "y": 3980,
        "wires": [
            [
                "57e365b9fdfea4e3",
                "973578b6a7a029a8",
                "a78ec4d9a136b4f3",
                "c6121a2072e9144e",
                "f0c6f6a00715f84b"
            ]
        ]
    },
    {
        "id": "b9fe3e9b4c254052",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "profile",
        "collection": "profile",
        "operation": "",
        "x": 630,
        "y": 4160,
        "wires": [
            [
                "63c4bf9c9ef69939"
            ]
        ]
    },
    {
        "id": "fa81c7fffe5cb160",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "auth",
        "collection": "auth",
        "operation": "",
        "x": 830,
        "y": 2780,
        "wires": [
            [
                "edda03375f18e3dd",
                "769ecdf46e9eeade",
                "a5cbf7e7580b0713",
                "3c2c44178818d609",
                "ceb0ca58e5677bb4",
                "b45920d2739a8ee9"
            ]
        ]
    },
    {
        "id": "b87eddcdc0abe3c4",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "write email",
        "collection": "auth",
        "operation": "",
        "x": 850,
        "y": 3040,
        "wires": [
            [
                "5e3a3e5848529260"
            ]
        ]
    },
    {
        "id": "eb99606616ecd2c7",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Read auth",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 2780,
        "wires": [
            [
                "fa81c7fffe5cb160"
            ]
        ]
    },
    {
        "id": "5e3a3e5848529260",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "function 5",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 3180,
        "wires": [
            [
                "98cbee78faa3644c"
            ]
        ]
    },
    {
        "id": "f6d1604dca4fe0a1",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "write password",
        "collection": "auth",
        "operation": "",
        "x": 880,
        "y": 3220,
        "wires": [
            [
                "5e3a3e5848529260"
            ]
        ]
    },
    {
        "id": "7e20b145f87391d6",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "write pin",
        "collection": "auth",
        "operation": "",
        "x": 890,
        "y": 3340,
        "wires": [
            [
                "5e3a3e5848529260"
            ]
        ]
    },
    {
        "id": "751db2a9c68dbbb8",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "write noti",
        "collection": "auth",
        "operation": "",
        "x": 1600,
        "y": 2920,
        "wires": [
            [
                "5e3a3e5848529260"
            ]
        ]
    },
    {
        "id": "5a4fcaa9d67b71ac",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Read auth data",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 120,
        "wires": [
            [
                "f47c96946e0406ee"
            ]
        ]
    },
    {
        "id": "f47c96946e0406ee",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "auth",
        "collection": "auth",
        "operation": "",
        "x": 690,
        "y": 100,
        "wires": [
            [
                "dc14ee4bc396216f"
            ]
        ]
    },
    {
        "id": "dc14ee4bc396216f",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set Auth Data",
        "func": "flow.set(\"username\", msg.payload.username);\nflow.set(\"password\", msg.payload.password);\nflow.set(\"email\", msg.payload.email);\nflow.set(\"pin\", msg.payload.pin);\nflow.set(\"noti\", msg.payload.noti);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "9837b59247569459",
        "type": "switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 410,
        "y": 2080,
        "wires": [
            [
                "1f87d8e6a9cca463"
            ],
            [
                "f458bdd51c74ad5e"
            ]
        ]
    },
    {
        "id": "f458bdd51c74ad5e",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Close message",
        "func": "msg.payload = \"You are about to close the lid\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 2120,
        "wires": [
            [
                "2b92e841cb7c1dde"
            ]
        ]
    },
    {
        "id": "2b92e841cb7c1dde",
        "type": "ui_toast",
        "z": "4e22cb1cfa902d3c",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Show notification",
        "x": 770,
        "y": 2120,
        "wires": [
            [
                "a9e15265f82a3ce8",
                "9efd4b90edaa8c3e",
                "12eb134ec93fe549"
            ]
        ]
    },
    {
        "id": "a9e15265f82a3ce8",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "topic": "lid/close",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1040,
        "y": 2140,
        "wires": []
    },
    {
        "id": "34e62355659580f7",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Update lock (lid) state",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"isLocked\": false}}];\nmsg.operation = \"updateOne\";\nflow.set(\"isLocked\", false);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 2040,
        "wires": [
            [
                "a522a55b2361a18c"
            ]
        ]
    },
    {
        "id": "a522a55b2361a18c",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "Write lock state",
        "collection": "state",
        "operation": "",
        "x": 1570,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "12eb134ec93fe549",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Update lock (lid) state",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"isLocked\": true}}];\nmsg.operation = \"updateOne\";\nflow.set(\"isLocked\", true);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 2200,
        "wires": [
            [
                "504913b0ee94542e"
            ]
        ]
    },
    {
        "id": "504913b0ee94542e",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "Write lock state",
        "collection": "state",
        "operation": "",
        "x": 1180,
        "y": 2200,
        "wires": [
            []
        ]
    },
    {
        "id": "f3839629ad5641e0",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1.5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 90,
        "y": 1780,
        "wires": [
            [
                "dc4d91b4416d5bfb"
            ]
        ]
    },
    {
        "id": "7fba971d2a73f13a",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "Read state",
        "collection": "state",
        "operation": "",
        "x": 430,
        "y": 1720,
        "wires": [
            [
                "a22d08f890c4d537",
                "aa50ec9e52c4d243"
            ]
        ]
    },
    {
        "id": "dc4d91b4416d5bfb",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Read state",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 1780,
        "wires": [
            [
                "7fba971d2a73f13a"
            ]
        ]
    },
    {
        "id": "a22d08f890c4d537",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Store states",
        "func": "flow.set('isLocked', msg.payload.isLocked);\nflow.set('isMuted', msg.payload.isMuted);\nflow.set('curBrightness', msg.payload.curBrightness);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 1780,
        "wires": [
            [
                "e1d7c24f17273551",
                "c89781a91ef9679a"
            ]
        ]
    },
    {
        "id": "e1d7c24f17273551",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set mute state",
        "func": "msg.payload = flow.get('isMuted');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 1720,
        "wires": [
            [
                "2d3d773e94945e2d"
            ]
        ]
    },
    {
        "id": "c89781a91ef9679a",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set brightness",
        "func": "msg.payload = flow.get('curBrightness');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1860,
        "wires": [
            [
                "666adf77ecd89530"
            ]
        ]
    },
    {
        "id": "fc9758fbd2eb998e",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Update brightness",
        "func": "flow.set('curBrightness', msg.payload);\nmsg.payload = [{id: \"1\"}, {$set: {\"curBrightness\": flow.get('curBrightness')}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1980,
        "wires": [
            [
                "3c8e2eb836d260a0"
            ]
        ]
    },
    {
        "id": "3c8e2eb836d260a0",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "Store brightness",
        "collection": "state",
        "operation": "",
        "x": 1180,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "d719be899bddc60b",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "isMuted?",
        "func": "msg.payload = ''\nmsg.payload = flow.get('isMuted');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1700,
        "wires": [
            [
                "43e07fdcfe54f8ba",
                "51a79c4ecb48501a"
            ]
        ]
    },
    {
        "id": "43e07fdcfe54f8ba",
        "type": "switch",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 1700,
        "wires": [
            [
                "d120d19685d3f52b"
            ]
        ]
    },
    {
        "id": "df3fa89660f6afdc",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "Food proportion",
        "topic": "home/foodProportion",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 280,
        "y": 580,
        "wires": [
            [
                "280ecdef0fa89293"
            ]
        ]
    },
    {
        "id": "bb30fd9920a518f1",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "Humidity",
        "topic": "home/humidity",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 260,
        "y": 640,
        "wires": [
            [
                "bf495db116dacd36"
            ]
        ]
    },
    {
        "id": "4d3a6f03493bf626",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "Temperature",
        "topic": "home/temperature",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 260,
        "y": 700,
        "wires": [
            [
                "c338781ad5883467"
            ]
        ]
    },
    {
        "id": "aa50ec9e52c4d243",
        "type": "debug",
        "z": "4e22cb1cfa902d3c",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 1660,
        "wires": []
    },
    {
        "id": "970529ead3938b2d",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Is locked?",
        "func": "msg.payload = flow.get('isLocked');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 2080,
        "wires": [
            [
                "9837b59247569459"
            ]
        ]
    },
    {
        "id": "6827dfcf40d20dd1",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Set mute",
        "func": "flow.set('isMuted', msg.payload);\nmsg.payload = [{id: \"1\"}, {$set: {\"isMuted\": msg.payload}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 1840,
        "wires": [
            [
                "ce83001701842747"
            ]
        ]
    },
    {
        "id": "ce83001701842747",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "write isMuted",
        "collection": "state",
        "operation": "",
        "x": 1310,
        "y": 1880,
        "wires": [
            []
        ]
    },
    {
        "id": "51a79c4ecb48501a",
        "type": "debug",
        "z": "4e22cb1cfa902d3c",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1200,
        "y": 1620,
        "wires": []
    },
    {
        "id": "065de421f5a82c21",
        "type": "http request",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://api.thingspeak.com/update?api_key=DJFUMV6GGHJ1K2NF&field1={{{payload}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 410,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "3dfc5edb0e01b48b",
        "type": "inject",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": true,
        "onceDelay": "30",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 760,
        "wires": [
            [
                "1434f6c833608c95"
            ]
        ]
    },
    {
        "id": "1434f6c833608c95",
        "type": "http request",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://api.thingspeak.com/channels/2373081/fields/1.json?api_key=510XCB8IN99M7MCH&results=1",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 310,
        "y": 760,
        "wires": [
            [
                "a4492f5314bdeec9"
            ]
        ]
    },
    {
        "id": "59ca9eccc8f0e46b",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "function 11",
        "func": "msg.payload = Number(msg.payload.feeds[0].field1);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 760,
        "wires": [
            [
                "bda1214319dafceb"
            ]
        ]
    },
    {
        "id": "a4492f5314bdeec9",
        "type": "json",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 450,
        "y": 760,
        "wires": [
            [
                "59ca9eccc8f0e46b"
            ]
        ]
    },
    {
        "id": "0d22d9dfca087bcf",
        "type": "mqtt in",
        "z": "4e22cb1cfa902d3c",
        "name": "Request Schedule",
        "topic": "schedule/request",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e9376441b65f8fa6",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 1240,
        "wires": [
            [
                "39dd80546f7adc11"
            ]
        ]
    },
    {
        "id": "bda1214319dafceb",
        "type": "ui_chart",
        "z": "4e22cb1cfa902d3c",
        "name": "",
        "group": "3e75d3f7611fd738",
        "order": 1,
        "width": 17,
        "height": 6,
        "label": "chart",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 810,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "c8840c060619242c",
        "type": "function",
        "z": "4e22cb1cfa902d3c",
        "name": "Read Schedule",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 1480,
        "wires": [
            [
                "d4f5184e3448f416"
            ]
        ]
    },
    {
        "id": "d4f5184e3448f416",
        "type": "mongodb3 in",
        "z": "4e22cb1cfa902d3c",
        "service": "_ext_",
        "configNode": "3dc8a4f82ddd9296",
        "name": "schedule",
        "collection": "schedule",
        "operation": "",
        "x": 1020,
        "y": 1480,
        "wires": [
            [
                "455c99ca9c913d69",
                "f74d4c1fe890934f",
                "244581b70adecd05",
                "704d9ae03cecd6ab"
            ]
        ]
    },
    {
        "id": "ea553dfbb5c8071d",
        "type": "debug",
        "z": "4e22cb1cfa902d3c",
        "name": "debug 13",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 4820,
        "wires": []
    },
    {
        "id": "eaf614e9e264fe06",
        "type": "mqtt out",
        "z": "4e22cb1cfa902d3c",
        "name": "buzzer/mute",
        "topic": "buzzer/mute",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1150,
        "y": 1780,
        "wires": []
    }
]
