[
    {
        "id": "f9f1080903b14d71",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "66b9a8064102befa",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "LOGIN",
        "info": "",
        "x": 230,
        "y": 140,
        "wires": []
    },
    {
        "id": "e7ee8580a125c14e",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Trigger login form at start",
        "func": "msg.payload = {\n    \"tab\": \"Login\",\n    \"tabs\": {\n        \"hide\": [\"Home\"]\n    }\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 200,
        "wires": [
            [
                "576728b9bbc8e965"
            ]
        ]
    },
    {
        "id": "576728b9bbc8e965",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 740,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "10f1c28947bf7464",
        "type": "ui_form",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "",
        "group": "781ac152bb694f16",
        "order": 0,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Username",
                "value": "username",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Password",
                "value": "password",
                "type": "password",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "username": "",
            "password": ""
        },
        "payload": "",
        "submit": "Login",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 290,
        "y": 280,
        "wires": [
            [
                "4c4bc93f05edfabd"
            ]
        ]
    },
    {
        "id": "4c4bc93f05edfabd",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Authenticate",
        "func": "if (msg.payload.username == flow.get(\"username\") && msg.payload.password == flow.get(\"password\"))\n    msg.payload.isValid = 1;\nelse msg.payload.isValid = 0;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 280,
        "wires": [
            [
                "0d8b7420684ed657"
            ]
        ]
    },
    {
        "id": "ae3ab55c7e2c80f1",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 200,
        "wires": [
            [
                "e7ee8580a125c14e",
                "a76fd705b0a4a5d5"
            ]
        ]
    },
    {
        "id": "0d8b7420684ed657",
        "type": "switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "property": "payload.isValid",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 280,
        "wires": [
            [
                "b4962068b7001857",
                "af1f48ab3c50bccd"
            ],
            [
                "75b46f127b096cd0"
            ]
        ]
    },
    {
        "id": "b4962068b7001857",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Show tabs and disable Login",
        "func": "msg.payload = {\n    \"tab\": \"Home\",\n    \"tabs\": {\n        \"hide\": [\"Login\"],\n        \"show\": [\"Home\"],\n    }\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 280,
        "wires": [
            [
                "12391810ce358652"
            ]
        ]
    },
    {
        "id": "20c04be9d154e5e5",
        "type": "ui_toast",
        "z": "f9f1080903b14d71",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Authentication failed",
        "name": "",
        "x": 1030,
        "y": 360,
        "wires": []
    },
    {
        "id": "12391810ce358652",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 1080,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "6f7133d0a626b85e",
        "type": "ui_toast",
        "z": "f9f1080903b14d71",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Login successfully",
        "name": "",
        "x": 1010,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "af1f48ab3c50bccd",
        "type": "change",
        "z": "f9f1080903b14d71",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Welcome back!!!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 320,
        "wires": [
            [
                "6f7133d0a626b85e"
            ]
        ]
    },
    {
        "id": "75b46f127b096cd0",
        "type": "change",
        "z": "f9f1080903b14d71",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Invalid username or password!",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 360,
        "wires": [
            [
                "20c04be9d154e5e5"
            ]
        ]
    },
    {
        "id": "29757f1bfcb1ece3",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "HOME",
        "info": "",
        "x": 130,
        "y": 580,
        "wires": []
    },
    {
        "id": "64c182fea56ae2ac",
        "type": "ui_gauge",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "59ed651b2ccf91aa",
        "order": 1,
        "width": 9,
        "height": 6,
        "gtype": "wave",
        "title": "Food Remaining",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 680,
        "y": 640,
        "wires": []
    },
    {
        "id": "d6f708a9f8486ec8",
        "type": "change",
        "z": "f9f1080903b14d71",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "80",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 640,
        "wires": [
            [
                "64c182fea56ae2ac"
            ]
        ]
    },
    {
        "id": "a767acdbb228f1e9",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 660,
        "wires": [
            [
                "d6f708a9f8486ec8",
                "6d06774c0dd274c5",
                "dabbad48d0b01d82"
            ]
        ]
    },
    {
        "id": "a64dfed4d165a7a7",
        "type": "ui_gauge",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "457669cf121f2326",
        "order": 2,
        "width": 5,
        "height": 6,
        "gtype": "donut",
        "title": "Humidity",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 680,
        "y": 700,
        "wires": []
    },
    {
        "id": "0db20da5036f0ed3",
        "type": "ui_gauge",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "457669cf121f2326",
        "order": 1,
        "width": 5,
        "height": 6,
        "gtype": "gage",
        "title": "Temperature",
        "label": "℃",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 670,
        "y": 760,
        "wires": []
    },
    {
        "id": "6d06774c0dd274c5",
        "type": "change",
        "z": "f9f1080903b14d71",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "70",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 720,
        "wires": [
            [
                "a64dfed4d165a7a7"
            ]
        ]
    },
    {
        "id": "dabbad48d0b01d82",
        "type": "change",
        "z": "f9f1080903b14d71",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "10",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 760,
        "wires": [
            [
                "0db20da5036f0ed3"
            ]
        ]
    },
    {
        "id": "cc585adc95fec266",
        "type": "ui_chart",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "3e75d3f7611fd738",
        "order": 1,
        "width": 10,
        "height": 5,
        "label": "Food consumed",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": true,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 580,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "403b335eb265623a",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "function 1",
        "func": "msg.payload = Math.random() * 100;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 900,
        "wires": [
            [
                "cc585adc95fec266"
            ]
        ]
    },
    {
        "id": "fe4351d9ebc43fca",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 900,
        "wires": [
            [
                "403b335eb265623a"
            ]
        ]
    },
    {
        "id": "fa86b613643dfec7",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "FOOD SCHEDULE",
        "info": "",
        "x": 130,
        "y": 1100,
        "wires": []
    },
    {
        "id": "566e8195115bbd71",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "PET PROFILE",
        "info": "",
        "x": 180,
        "y": 3880,
        "wires": []
    },
    {
        "id": "e014943032dc26f8",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "c67eb2ed437d0cbf",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Name:",
        "format": "{{msg.payload.name}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 770,
        "y": 3880,
        "wires": []
    },
    {
        "id": "cea98becad6864b7",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "c67eb2ed437d0cbf",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Date of birth:",
        "format": "{{msg.payload.dob}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 790,
        "y": 3940,
        "wires": []
    },
    {
        "id": "d73775724fde4f95",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "x": 110,
        "y": 3960,
        "wires": [
            [
                "dbfbf30d2ae0e913",
                "9439fe3217582791"
            ]
        ]
    },
    {
        "id": "fa207f16cc768312",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "c67eb2ed437d0cbf",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Weight:",
        "format": "{{msg.payload.weight}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 780,
        "y": 3980,
        "wires": []
    },
    {
        "id": "dd703cddecebc26b",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "c67eb2ed437d0cbf",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Breed:",
        "format": "{{msg.payload.breed}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 770,
        "y": 4020,
        "wires": []
    },
    {
        "id": "06228b428e001c18",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "c67eb2ed437d0cbf",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Color: ",
        "format": "{{msg.payload.color}}",
        "layout": "row-center",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 770,
        "y": 4060,
        "wires": []
    },
    {
        "id": "449a4d9e878202fc",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "c67eb2ed437d0cbf",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Update information",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 210,
        "y": 4340,
        "wires": [
            [
                "00e5354cf0985bfa"
            ]
        ]
    },
    {
        "id": "bb8f9330602be265",
        "type": "ui_form",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Enter new information",
        "group": "a4f453e6cef8b789",
        "order": 7,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Name",
                "value": "name",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Date of birth",
                "value": "dob",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Weight",
                "value": "weight",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Breed",
                "value": "breed",
                "type": "text",
                "required": false,
                "rows": null
            },
            {
                "label": "Color",
                "value": "color",
                "type": "text",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "name": "",
            "dob": "",
            "weight": "",
            "breed": "",
            "color": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": true,
        "className": "",
        "x": 220,
        "y": 4240,
        "wires": [
            [
                "ffd5bd2b128c6aa6",
                "434d4c61600ff60f"
            ]
        ]
    },
    {
        "id": "00e5354cf0985bfa",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Switch to update screen",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Profile_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 4340,
        "wires": [
            [
                "f74ab68a5818f56d"
            ]
        ]
    },
    {
        "id": "f74ab68a5818f56d",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 740,
        "y": 4340,
        "wires": [
            []
        ]
    },
    {
        "id": "dbfbf30d2ae0e913",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"Profile_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 4060,
        "wires": [
            [
                "40aa2fbefff63d16"
            ]
        ]
    },
    {
        "id": "40aa2fbefff63d16",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 520,
        "y": 4060,
        "wires": [
            []
        ]
    },
    {
        "id": "ffd5bd2b128c6aa6",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"Profile_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 4240,
        "wires": [
            [
                "4c81b890105fede2"
            ]
        ]
    },
    {
        "id": "4c81b890105fede2",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 700,
        "y": 4240,
        "wires": [
            []
        ]
    },
    {
        "id": "41294777aec1420d",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "DEVICE MANAGER",
        "info": "",
        "x": 130,
        "y": 1720,
        "wires": []
    },
    {
        "id": "bf1708ea018ba6dd",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "SETTINGS",
        "info": "",
        "x": 120,
        "y": 2720,
        "wires": []
    },
    {
        "id": "3a97eaf11833b378",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload.email",
                "v": "choGthinh@dbrr.com",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "x": 70,
        "y": 2820,
        "wires": [
            [
                "2ae3cd9df8cac943",
                "1c0204b4d243383e"
            ]
        ]
    },
    {
        "id": "e198ccdbfd5d7a06",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "ca32dfb2ec8ab7f1",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Email: ",
        "format": "{{msg.payload.email}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 690,
        "y": 2820,
        "wires": []
    },
    {
        "id": "a013d4bc56d8b045",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Change email",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 100,
        "y": 3140,
        "wires": [
            [
                "0119865c7676ceb9"
            ]
        ]
    },
    {
        "id": "8a53ec47e0e9db6c",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "ca32dfb2ec8ab7f1",
        "order": 5,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Notification",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "Arial,Arial,Helvetica,sans-serif",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 850,
        "y": 2840,
        "wires": []
    },
    {
        "id": "b072b112cb99bfc9",
        "type": "ui_switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "On / Off",
        "tooltip": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 880,
        "y": 2880,
        "wires": [
            [
                "cf2b0f1f78a671bc"
            ]
        ]
    },
    {
        "id": "a872c67349ce6da5",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "buzzer/trigger",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1300,
        "y": 1800,
        "wires": []
    },
    {
        "id": "c1667a2fe78ca7e3",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "bc6151c1fb37c908",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Trigger the buzzer",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "trigger buzzer",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 830,
        "y": 1640,
        "wires": [
            [
                "27c2bdd1d19aecda"
            ]
        ]
    },
    {
        "id": "14a6acd96ecf2321",
        "type": "ui_switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Mute sound",
        "tooltip": "",
        "group": "bc6151c1fb37c908",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 930,
        "y": 1780,
        "wires": [
            [
                "497170fb21654482"
            ]
        ]
    },
    {
        "id": "b3acbf95667102b0",
        "type": "ui_slider",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Light slider",
        "tooltip": "",
        "group": "b7dc2792b95da7d1",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "topic",
        "topicType": "msg",
        "min": "0",
        "max": 10,
        "step": 1,
        "className": "",
        "x": 750,
        "y": 1880,
        "wires": [
            [
                "da24c34ef6c55d8d",
                "7bb38860cc07a88d",
                "2c3458d84ab98bc1"
            ]
        ]
    },
    {
        "id": "da24c34ef6c55d8d",
        "type": "ui_gauge",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "b7dc2792b95da7d1",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "compass",
        "title": "Light",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": 10,
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 930,
        "y": 1840,
        "wires": []
    },
    {
        "id": "29dbafa29cda1643",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "home/data",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 490,
        "y": 520,
        "wires": []
    },
    {
        "id": "0ee9b9ba04f402c9",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 520,
        "wires": [
            [
                "29dbafa29cda1643"
            ]
        ]
    },
    {
        "id": "7bb38860cc07a88d",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "light/set",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 940,
        "y": 1900,
        "wires": []
    },
    {
        "id": "27ce9b305b964713",
        "type": "ui_toast",
        "z": "f9f1080903b14d71",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Enter the PIN code",
        "name": "Ask for PIN",
        "x": 1050,
        "y": 2060,
        "wires": [
            [
                "b20f987abcf044b9"
            ]
        ]
    },
    {
        "id": "b93651413ff6ee1a",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Open message",
        "func": "msg.payload = \"You are about to open the lid\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 2060,
        "wires": [
            [
                "27ce9b305b964713"
            ]
        ]
    },
    {
        "id": "b20f987abcf044b9",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Check PIN code",
        "func": "// if (msg.payload == flow.get('pin')) {\nif (msg.payload == \"123\") {\n    msg.payload = true;\n}\nelse msg.payload = false;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 2060,
        "wires": [
            [
                "2ee6d7c350854c26"
            ]
        ]
    },
    {
        "id": "76a2563d60215871",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "bf126c3444189feb",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Open / Close the lid",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "lid",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 210,
        "y": 2040,
        "wires": [
            [
                "260640558da16dea"
            ]
        ]
    },
    {
        "id": "2ee6d7c350854c26",
        "type": "switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 2060,
        "wires": [
            [
                "70354c6d31e6f22a",
                "2c6bf89578559c43",
                "30ddd69ee76acf77"
            ],
            [
                "cddb1e9e09ef10ed"
            ]
        ]
    },
    {
        "id": "70354c6d31e6f22a",
        "type": "ui_toast",
        "z": "f9f1080903b14d71",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Operation successfully completed",
        "name": "",
        "x": 1630,
        "y": 2000,
        "wires": []
    },
    {
        "id": "cddb1e9e09ef10ed",
        "type": "ui_toast",
        "z": "f9f1080903b14d71",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Invalid PIN code",
        "name": "",
        "x": 1630,
        "y": 2080,
        "wires": []
    },
    {
        "id": "b03265f629860a99",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "aa2c7da12e1086a2",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Feed your pet",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 2240,
        "wires": [
            [
                "c2cde41ad47a0097"
            ]
        ]
    },
    {
        "id": "2c6bf89578559c43",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "lid/open",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1600,
        "y": 2040,
        "wires": []
    },
    {
        "id": "c2cde41ad47a0097",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "feed",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 430,
        "y": 2240,
        "wires": []
    },
    {
        "id": "21fd892be7cf7fe0",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 1180,
        "wires": [
            [
                "49e16463b9a42008",
                "b52406334f868200"
            ]
        ]
    },
    {
        "id": "db517c5f6ffd2fe4",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "0d1a2c0b7eda5eb1",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "12:00 - 14:00",
        "format": "{{msg.payload.time1}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1280,
        "wires": []
    },
    {
        "id": "a607fec6acdd9c98",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "0d1a2c0b7eda5eb1",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "8:00 - 10:00",
        "format": "{{msg.payload.time0}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1240,
        "wires": []
    },
    {
        "id": "c24505f45b29f90d",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "0d1a2c0b7eda5eb1",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "20:00 - 22:00",
        "format": "{{msg.payload.time3}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1360,
        "wires": []
    },
    {
        "id": "638a341c0e6fef90",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "0d1a2c0b7eda5eb1",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "16:00 - 18:00",
        "format": "{{msg.payload.time2}}g",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 870,
        "y": 1320,
        "wires": []
    },
    {
        "id": "7d025cc9633e82bb",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "0d1a2c0b7eda5eb1",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Update Schedule",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 250,
        "y": 1540,
        "wires": [
            [
                "bd9d1a1e7c3fec0c"
            ]
        ]
    },
    {
        "id": "49e16463b9a42008",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"FoodSchedule_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1120,
        "wires": [
            [
                "6244d9fa2f75cf66"
            ]
        ]
    },
    {
        "id": "6244d9fa2f75cf66",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 600,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "bd9d1a1e7c3fec0c",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set update form visible",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"FoodSchedule_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1540,
        "wires": [
            [
                "1da684b09f1a83ac"
            ]
        ]
    },
    {
        "id": "1da684b09f1a83ac",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 680,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "cb58e83f5427ccd4",
        "type": "ui_form",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Update Food Schedule",
        "group": "07c0afe64b480570",
        "order": 0,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "8:00 - 10:00",
                "value": "time0",
                "type": "number",
                "required": false,
                "rows": null
            },
            {
                "label": "12:00 - 14:00",
                "value": "time1",
                "type": "number",
                "required": false,
                "rows": null
            },
            {
                "label": "16:00 - 18:00",
                "value": "time2",
                "type": "number",
                "required": false,
                "rows": null
            },
            {
                "label": "20:00 - 22:00",
                "value": "time3",
                "type": "number",
                "required": false,
                "rows": null
            }
        ],
        "formValue": {
            "time0": "",
            "time1": "",
            "time2": "",
            "time3": ""
        },
        "payload": "",
        "submit": "update",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 180,
        "y": 1360,
        "wires": [
            [
                "1077bb4b86cf6e9e",
                "a607fec6acdd9c98",
                "db517c5f6ffd2fe4",
                "638a341c0e6fef90",
                "c24505f45b29f90d",
                "c517a3c42cb48d93"
            ]
        ]
    },
    {
        "id": "1077bb4b86cf6e9e",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set update form invisible",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"FoodSchedule_Update\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 1420,
        "wires": [
            [
                "6ea7210971ecefc1"
            ]
        ]
    },
    {
        "id": "6ea7210971ecefc1",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 740,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "80c74cf43a676686",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "schedule/set",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "e9376441b65f8fa6",
        "x": 950,
        "y": 1180,
        "wires": []
    },
    {
        "id": "7c8a0b8f8bfe53c0",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Split data",
        "func": "var msgList = [];\nmsgList.push({payload: msg.payload.time0});\nmsgList.push({payload: msg.payload.time1});\nmsgList.push({payload: msg.payload.time2});\nmsgList.push({payload: msg.payload.time3});\nreturn [msgList];",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1180,
        "wires": [
            [
                "80c74cf43a676686"
            ]
        ]
    },
    {
        "id": "f321906b7278bbcb",
        "type": "debug",
        "z": "f9f1080903b14d71",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 1140,
        "wires": []
    },
    {
        "id": "6e2ad7bf38689ae5",
        "type": "mqtt in",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "home/foodConsumed",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "e9376441b65f8fa6",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "ccd63af42886e45c",
        "type": "debug",
        "z": "f9f1080903b14d71",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 360,
        "y": 960,
        "wires": []
    },
    {
        "id": "f09b9f1c525048a1",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set notification",
        "func": "if (msg.payload.noti == 1) msg.payload = true;\nelse msg.payload = false;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 2900,
        "wires": [
            [
                "b072b112cb99bfc9"
            ]
        ]
    },
    {
        "id": "81783d77b9a71040",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "ca32dfb2ec8ab7f1",
        "order": 3,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Username: ",
        "format": "{{msg.payload.username}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 710,
        "y": 2960,
        "wires": []
    },
    {
        "id": "7b0deaffe4c1e64c",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "ca32dfb2ec8ab7f1",
        "order": 7,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "Password: ",
        "format": "{{msg.payload.password}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 690,
        "y": 3020,
        "wires": []
    },
    {
        "id": "521bf62dca17518f",
        "type": "ui_text",
        "z": "f9f1080903b14d71",
        "group": "ca32dfb2ec8ab7f1",
        "order": 9,
        "width": 6,
        "height": 1,
        "name": "",
        "label": "PIN code: ",
        "format": "{{msg.payload.pin}}",
        "layout": "row-left",
        "className": "",
        "style": true,
        "font": "",
        "fontSize": "20",
        "color": "#ffffff",
        "x": 660,
        "y": 3080,
        "wires": []
    },
    {
        "id": "dacb80871d30fc2a",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 8,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Change password",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 3220,
        "wires": [
            [
                "670b5e47730a8b3d"
            ]
        ]
    },
    {
        "id": "d94c5dc29ef34c5e",
        "type": "ui_button",
        "z": "f9f1080903b14d71",
        "name": "",
        "group": "ca32dfb2ec8ab7f1",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Change PIN",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 110,
        "y": 3300,
        "wires": [
            [
                "e93e6ed3f0c202c5"
            ]
        ]
    },
    {
        "id": "25cc1e349667a82a",
        "type": "ui_form",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Change email",
        "group": "11fbed7ab203ea7d",
        "order": 11,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Email",
                "value": "email",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "email": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 420,
        "y": 3380,
        "wires": [
            [
                "a7403eaf4995285f"
            ]
        ]
    },
    {
        "id": "d63f02682e5080c3",
        "type": "ui_form",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Change password",
        "group": "50a854303ebca012",
        "order": 12,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "New password",
                "value": "password",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "password": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 390,
        "y": 3500,
        "wires": [
            [
                "1b9ca7fe3c04c105"
            ]
        ]
    },
    {
        "id": "5749d12709765285",
        "type": "ui_form",
        "z": "f9f1080903b14d71",
        "name": "",
        "label": "Change PIN code",
        "group": "ae58e03e508736ac",
        "order": 13,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "New PIN code",
                "value": "pin",
                "type": "text",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "pin": ""
        },
        "payload": "",
        "submit": "submit",
        "cancel": "cancel",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 390,
        "y": 3620,
        "wires": [
            [
                "1cf445f916683081"
            ]
        ]
    },
    {
        "id": "2ae3cd9df8cac943",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Hide update forms ",
        "func": "msg.payload = {\n    \"group\": {\n        \"hide\": [\"Settings_EmailUpdate\", \"Settings_PasswordUpdate\", \"Settings_PinUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 210,
        "y": 2980,
        "wires": [
            [
                "8367290278f70fb2"
            ]
        ]
    },
    {
        "id": "8367290278f70fb2",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 400,
        "y": 3020,
        "wires": [
            []
        ]
    },
    {
        "id": "0119865c7676ceb9",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Unhide email form",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Settings_EmailUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 3140,
        "wires": [
            [
                "f716c5bc6f4e1e71"
            ]
        ]
    },
    {
        "id": "f716c5bc6f4e1e71",
        "type": "ui_ui_control",
        "z": "f9f1080903b14d71",
        "name": "",
        "events": "all",
        "x": 620,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "670b5e47730a8b3d",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Unhide password form",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Settings_PasswordUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 3220,
        "wires": [
            [
                "f716c5bc6f4e1e71"
            ]
        ]
    },
    {
        "id": "e93e6ed3f0c202c5",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Unhide PIN form",
        "func": "msg.payload = {\n    \"group\": {\n        \"show\": [\"Settings_PinUpdate\"]\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 3300,
        "wires": [
            [
                "f716c5bc6f4e1e71"
            ]
        ]
    },
    {
        "id": "a7403eaf4995285f",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set new email",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"email\": msg.payload.email}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 3360,
        "wires": [
            [
                "e198ccdbfd5d7a06",
                "c6bd629b72f9b96e"
            ]
        ]
    },
    {
        "id": "1b9ca7fe3c04c105",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set new password",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"password\": msg.payload.password}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 3500,
        "wires": [
            [
                "7b0deaffe4c1e64c",
                "6239ff4f73eb42f5"
            ]
        ]
    },
    {
        "id": "1cf445f916683081",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set new pin",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"pin\": msg.payload.pin}}];\nmsg.operation = \"updateOne\";\nreturn msg;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 3620,
        "wires": [
            [
                "521bf62dca17518f",
                "28ab1b3cf2d5b693"
            ]
        ]
    },
    {
        "id": "08e390758d76a4a3",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set Auth Data",
        "func": "flow.set(\"username\", msg.payload.username);\nflow.set(\"password\", msg.payload.password);\nflow.set(\"email\", msg.payload.email);\nflow.set(\"pin\", msg.payload.pin);\nflow.set(\"noti\", msg.payload.noti);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 2740,
        "wires": [
            [
                "f0186fd36b7cad1a"
            ]
        ]
    },
    {
        "id": "cf2b0f1f78a671bc",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set new noti",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"noti\": msg.payload}}];\nmsg.operation = \"updateOne\";\nreturn msg;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 2860,
        "wires": [
            [
                "3df4f8cb732b25da"
            ]
        ]
    },
    {
        "id": "500a79a72fec5eb4",
        "type": "mqtt in",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "alert/food",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 4660,
        "wires": [
            [
                "19dc02e296777ee9"
            ]
        ]
    },
    {
        "id": "feddc0f7d5d85aa7",
        "type": "mqtt in",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "alert/env",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 4780,
        "wires": [
            [
                "19dc02e296777ee9"
            ]
        ]
    },
    {
        "id": "648fe0c81620abf8",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Setup email",
        "func": "msg.payload = \"The device is running low on supplies. Can you please restock it at your earliest convenience?\";\nmsg.topic = \"FOOD RUNNING OUT\";\nmsg.to = flow.get(\"email\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 4660,
        "wires": [
            [
                "63e013fa550d8ba7",
                "466eca59b4ea3541"
            ]
        ]
    },
    {
        "id": "e817da3310c43024",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Setup email",
        "func": "msg.payload = \"It seems like the temperature or humidity levels are a bit extreme. You might want to check on things and make adjustments if needed.\";\nmsg.topic = \"TEMPERATURE AND HUMIDITY LEVELS DETECTED OUTSIDE NORMAL RANGE\";\nmsg.to = flow.get(\"email\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 4780,
        "wires": [
            [
                "3a165384f3b95e76"
            ]
        ]
    },
    {
        "id": "7fa5be99527d87ea",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 520,
        "y": 4600,
        "wires": [
            [
                "648fe0c81620abf8"
            ]
        ]
    },
    {
        "id": "466eca59b4ea3541",
        "type": "debug",
        "z": "f9f1080903b14d71",
        "name": "debug 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 4580,
        "wires": []
    },
    {
        "id": "f0186fd36b7cad1a",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "function 4",
        "func": "msg.payload = flow.get(\"email\");\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "de5ae13d495ae367",
        "type": "switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 4700,
        "wires": [
            [
                "648fe0c81620abf8",
                "e817da3310c43024"
            ],
            []
        ]
    },
    {
        "id": "19dc02e296777ee9",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Check notification is turn on or not",
        "func": "if (flow.get(\"noti\") == true) msg.payload = 1;\nelse msg.payload = 0;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 4700,
        "wires": [
            [
                "de5ae13d495ae367"
            ]
        ]
    },
    {
        "id": "63e013fa550d8ba7",
        "type": "e-mail",
        "z": "f9f1080903b14d71",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "Send email",
        "x": 1010,
        "y": 4740,
        "wires": []
    },
    {
        "id": "3a165384f3b95e76",
        "type": "e-mail",
        "z": "f9f1080903b14d71",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": true,
        "token": "oauth2Response.access_token",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "Send email",
        "x": 990,
        "y": 4840,
        "wires": []
    },
    {
        "id": "b52406334f868200",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Read Schedule",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1240,
        "wires": [
            [
                "f99ee889d763b770"
            ]
        ]
    },
    {
        "id": "c517a3c42cb48d93",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Update Schedule",
        "func": "var msgdata = {}\n\nvar updateData = {};\n\nif(msg.payload.time0 != null){\n    updateData.time0 = msg.payload.time0;\n}\nif(msg.payload.time1 != null){\n    updateData.time1 = msg.payload.time1;\n}\nif(msg.payload.time2 != null){\n    updateData.time2 = msg.payload.time2;\n}\nif(msg.payload.time3 != null){\n    updateData.time3 = msg.payload.time3;\n}\n\nmsgdata.operation = \"updateOne\";\nmsgdata.payload = [{id: \"1\"}, {$set: updateData}];\nreturn msgdata;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1480,
        "wires": [
            [
                "d99eb134142980fa"
            ]
        ]
    },
    {
        "id": "9439fe3217582791",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Read Profile",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 3980,
        "wires": [
            [
                "a38edaf36859a520"
            ]
        ]
    },
    {
        "id": "434d4c61600ff60f",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Update Profile",
        "func": "var msgdata = {}\n\nvar updateData = {};\n\nif(msg.payload.name != \"\"){\n    updateData.name = msg.payload.name;\n}\nif(msg.payload.dob != \"\"){\n    updateData.dob = msg.payload.dob;\n}\nif(msg.payload.weight != \"\"){\n    updateData.weight = msg.payload.weight;\n}\nif(msg.payload.breed != \"\"){\n    updateData.breed = msg.payload.breed;\n}\nif (msg.payload.color != \"\"){\n    updateData.color = msg.payload.color;\n}\n\nmsgdata.operation = \"updateOne\";\nmsgdata.payload = [{id: \"1\"}, {$set: updateData}];\nreturn msgdata;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 4160,
        "wires": [
            [
                "4f80b75013f8cbc1"
            ]
        ]
    },
    {
        "id": "1c12d5048973d80d",
        "type": "comment",
        "z": "f9f1080903b14d71",
        "name": "SEND MAIL",
        "info": "",
        "x": 250,
        "y": 4540,
        "wires": []
    },
    {
        "id": "f99ee889d763b770",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "schedule",
        "collection": "schedule",
        "operation": "",
        "x": 580,
        "y": 1240,
        "wires": [
            [
                "a607fec6acdd9c98",
                "db517c5f6ffd2fe4",
                "638a341c0e6fef90",
                "c24505f45b29f90d",
                "7c8a0b8f8bfe53c0"
            ]
        ]
    },
    {
        "id": "d99eb134142980fa",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "schedule",
        "collection": "schedule",
        "operation": "",
        "x": 700,
        "y": 1480,
        "wires": [
            [
                "b52406334f868200"
            ]
        ]
    },
    {
        "id": "a38edaf36859a520",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "profile",
        "collection": "profile",
        "operation": "",
        "x": 470,
        "y": 3980,
        "wires": [
            [
                "e014943032dc26f8",
                "cea98becad6864b7",
                "fa207f16cc768312",
                "dd703cddecebc26b",
                "06228b428e001c18"
            ]
        ]
    },
    {
        "id": "4f80b75013f8cbc1",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "profile",
        "collection": "profile",
        "operation": "",
        "x": 630,
        "y": 4160,
        "wires": [
            [
                "9439fe3217582791"
            ]
        ]
    },
    {
        "id": "e2dc347f8cf50718",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "auth",
        "collection": "auth",
        "operation": "",
        "x": 430,
        "y": 2860,
        "wires": [
            [
                "08e390758d76a4a3",
                "e198ccdbfd5d7a06",
                "f09b9f1c525048a1",
                "81783d77b9a71040",
                "7b0deaffe4c1e64c",
                "521bf62dca17518f"
            ]
        ]
    },
    {
        "id": "c6bd629b72f9b96e",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "write email",
        "collection": "auth",
        "operation": "",
        "x": 950,
        "y": 3300,
        "wires": [
            [
                "0f4ffb63db3da111"
            ]
        ]
    },
    {
        "id": "1c0204b4d243383e",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Read auth",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 2840,
        "wires": [
            [
                "e2dc347f8cf50718"
            ]
        ]
    },
    {
        "id": "0f4ffb63db3da111",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "function 5",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 3440,
        "wires": [
            [
                "2ae3cd9df8cac943"
            ]
        ]
    },
    {
        "id": "6239ff4f73eb42f5",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "write password",
        "collection": "auth",
        "operation": "",
        "x": 980,
        "y": 3480,
        "wires": [
            [
                "0f4ffb63db3da111"
            ]
        ]
    },
    {
        "id": "28ab1b3cf2d5b693",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "write pin",
        "collection": "auth",
        "operation": "",
        "x": 990,
        "y": 3600,
        "wires": [
            [
                "0f4ffb63db3da111"
            ]
        ]
    },
    {
        "id": "3df4f8cb732b25da",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "write noti",
        "collection": "auth",
        "operation": "",
        "x": 1200,
        "y": 2960,
        "wires": [
            [
                "0f4ffb63db3da111"
            ]
        ]
    },
    {
        "id": "a76fd705b0a4a5d5",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Read auth data",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 120,
        "wires": [
            [
                "80a8d5024ead743a"
            ]
        ]
    },
    {
        "id": "80a8d5024ead743a",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "auth",
        "collection": "auth",
        "operation": "",
        "x": 690,
        "y": 100,
        "wires": [
            [
                "226482cb4d2c98b4"
            ]
        ]
    },
    {
        "id": "226482cb4d2c98b4",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set Auth Data",
        "func": "flow.set(\"username\", msg.payload.username);\nflow.set(\"password\", msg.payload.password);\nflow.set(\"email\", msg.payload.email);\nflow.set(\"pin\", msg.payload.pin);\nflow.set(\"noti\", msg.payload.noti);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "51accb245572eda4",
        "type": "switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 2080,
        "wires": [
            [
                "b93651413ff6ee1a"
            ],
            [
                "dc9ed9914cae050b"
            ]
        ]
    },
    {
        "id": "dc9ed9914cae050b",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Close message",
        "func": "msg.payload = \"You are about to close the lid\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 2160,
        "wires": [
            [
                "59abee0eb0d47112"
            ]
        ]
    },
    {
        "id": "59abee0eb0d47112",
        "type": "ui_toast",
        "z": "f9f1080903b14d71",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "Show notification",
        "x": 1050,
        "y": 2160,
        "wires": [
            [
                "807ecea94705669d",
                "70354c6d31e6f22a",
                "6cb82e5d03f59cdc"
            ]
        ]
    },
    {
        "id": "807ecea94705669d",
        "type": "mqtt out",
        "z": "f9f1080903b14d71",
        "name": "",
        "topic": "lid/close",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "765ac9edbab7f418",
        "x": 1300,
        "y": 2160,
        "wires": []
    },
    {
        "id": "30ddd69ee76acf77",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Update lock (lid) state",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"isLocked\": false}}];\nmsg.operation = \"updateOne\";\nflow.set(\"isLocked\", false);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 1940,
        "wires": [
            [
                "6fcad37b312c9a92"
            ]
        ]
    },
    {
        "id": "6fcad37b312c9a92",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "Write lock state",
        "collection": "state",
        "operation": "",
        "x": 1830,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "6cb82e5d03f59cdc",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Update lock (lid) state",
        "func": "msg.payload = [{id: \"1\"}, {$set: {\"isLocked\": true}}];\nmsg.operation = \"updateOne\";\nflow.set(\"isLocked\", true);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 2240,
        "wires": [
            [
                "74feaa9ddf4c6b5d"
            ]
        ]
    },
    {
        "id": "74feaa9ddf4c6b5d",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "Write lock state",
        "collection": "state",
        "operation": "",
        "x": 1520,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "87a09465c187c77b",
        "type": "inject",
        "z": "f9f1080903b14d71",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 90,
        "y": 1800,
        "wires": [
            [
                "b900caee1f67a699"
            ]
        ]
    },
    {
        "id": "539395e0c78d12f7",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "Read state",
        "collection": "state",
        "operation": "",
        "x": 430,
        "y": 1720,
        "wires": [
            [
                "c92178a591b19718",
                "f120fbd95d5ccaf8"
            ]
        ]
    },
    {
        "id": "b900caee1f67a699",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Read state",
        "func": "msg.payload = {}\nmsg.operation = \"find.forEach\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 250,
        "y": 1780,
        "wires": [
            [
                "539395e0c78d12f7"
            ]
        ]
    },
    {
        "id": "c92178a591b19718",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Store states",
        "func": "flow.set('isLocked', msg.payload.isLocked);\nflow.set('isMuted', msg.payload.isMuted);\nflow.set('curBrightness', msg.payload.curBrightness);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 1780,
        "wires": [
            [
                "e30bad65b5550b15",
                "1dd64e26b28eec50"
            ]
        ]
    },
    {
        "id": "e30bad65b5550b15",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set mute state",
        "func": "msg.payload = flow.get('isMuted');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 1720,
        "wires": [
            [
                "14a6acd96ecf2321"
            ]
        ]
    },
    {
        "id": "1dd64e26b28eec50",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set brightness",
        "func": "msg.payload = flow.get('curBrightness');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1860,
        "wires": [
            [
                "b3acbf95667102b0"
            ]
        ]
    },
    {
        "id": "2c3458d84ab98bc1",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Update brightness",
        "func": "flow.set('curBrightness', msg.payload);\nmsg.payload = [{id: \"1\"}, {$set: {\"curBrightness\": flow.get('curBrightness')}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1980,
        "wires": [
            [
                "38e7f2d8e737cf2f"
            ]
        ]
    },
    {
        "id": "38e7f2d8e737cf2f",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "Store brightness",
        "collection": "state",
        "operation": "",
        "x": 1180,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "27c2bdd1d19aecda",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "isMuted?",
        "func": "msg.payload = ''\nmsg.payload = flow.get('isMuted');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1700,
        "wires": [
            [
                "70f78cb515508f2f",
                "c18386c390f5e1e0"
            ]
        ]
    },
    {
        "id": "70f78cb515508f2f",
        "type": "switch",
        "z": "f9f1080903b14d71",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 1700,
        "wires": [
            [
                "a872c67349ce6da5"
            ]
        ]
    },
    {
        "id": "dcf45c78884d3664",
        "type": "mqtt in",
        "z": "f9f1080903b14d71",
        "name": "Food proportion",
        "topic": "home/foodProportion",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 420,
        "y": 600,
        "wires": [
            [
                "64c182fea56ae2ac"
            ]
        ]
    },
    {
        "id": "e69251b189b67006",
        "type": "mqtt in",
        "z": "f9f1080903b14d71",
        "name": "Humidity",
        "topic": "home/humidity",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 430,
        "y": 680,
        "wires": [
            [
                "a64dfed4d165a7a7"
            ]
        ]
    },
    {
        "id": "f92d6c94f30dcdf2",
        "type": "mqtt in",
        "z": "f9f1080903b14d71",
        "name": "Temperature",
        "topic": "home/temperature",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "765ac9edbab7f418",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 430,
        "y": 800,
        "wires": [
            [
                "0db20da5036f0ed3"
            ]
        ]
    },
    {
        "id": "f120fbd95d5ccaf8",
        "type": "debug",
        "z": "f9f1080903b14d71",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 1660,
        "wires": []
    },
    {
        "id": "260640558da16dea",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Is locked?",
        "func": "msg.payload = flow.get('isLocked');\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 2060,
        "wires": [
            [
                "51accb245572eda4"
            ]
        ]
    },
    {
        "id": "497170fb21654482",
        "type": "function",
        "z": "f9f1080903b14d71",
        "name": "Set mute",
        "func": "flow.set('isMuted', msg.payload);\nmsg.payload = [{id: \"1\"}, {$set: {\"isMuted\": msg.payload}}];\nmsg.operation = \"updateOne\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 1840,
        "wires": [
            [
                "3f2552360f7fc5bf"
            ]
        ]
    },
    {
        "id": "3f2552360f7fc5bf",
        "type": "mongodb3 in",
        "z": "f9f1080903b14d71",
        "service": "_ext_",
        "configNode": "2119f505594bdcc1",
        "name": "write isMuted",
        "collection": "state",
        "operation": "",
        "x": 1310,
        "y": 1880,
        "wires": [
            []
        ]
    },
    {
        "id": "c18386c390f5e1e0",
        "type": "debug",
        "z": "f9f1080903b14d71",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 1620,
        "wires": []
    },
    {
        "id": "222ae0111aa6cd8f",
        "type": "ui_spacer",
        "z": "f9f1080903b14d71",
        "name": "spacer",
        "group": "ca32dfb2ec8ab7f1",
        "order": 4,
        "width": 3,
        "height": 1
    },
    {
        "id": "781ac152bb694f16",
        "type": "ui_group",
        "name": "Login form",
        "tab": "ce5ab49963467673",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "59ed651b2ccf91aa",
        "type": "ui_group",
        "name": "Food capacity",
        "tab": "fa03995da56e803e",
        "order": 1,
        "disp": true,
        "width": "9",
        "collapse": false,
        "className": ""
    },
    {
        "id": "457669cf121f2326",
        "type": "ui_group",
        "name": "Temperature",
        "tab": "fa03995da56e803e",
        "order": 2,
        "disp": true,
        "width": 10,
        "collapse": false,
        "className": ""
    },
    {
        "id": "3e75d3f7611fd738",
        "type": "ui_group",
        "name": "Food consumption",
        "tab": "fa03995da56e803e",
        "order": 4,
        "disp": true,
        "width": 10,
        "collapse": false,
        "className": ""
    },
    {
        "id": "c67eb2ed437d0cbf",
        "type": "ui_group",
        "name": "Profile",
        "tab": "e6b7a06246b867a9",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a4f453e6cef8b789",
        "type": "ui_group",
        "name": "Update",
        "tab": "e6b7a06246b867a9",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ca32dfb2ec8ab7f1",
        "type": "ui_group",
        "name": "Email",
        "tab": "b04556f58b734d6e",
        "order": 1,
        "disp": false,
        "width": "9",
        "collapse": false,
        "className": ""
    },
    {
        "id": "765ac9edbab7f418",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.hivemq.com",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "bc6151c1fb37c908",
        "type": "ui_group",
        "name": "Buzzer",
        "tab": "8acf4cd8dcadb6ca",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b7dc2792b95da7d1",
        "type": "ui_group",
        "name": "Light",
        "tab": "8acf4cd8dcadb6ca",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bf126c3444189feb",
        "type": "ui_group",
        "name": "Lid",
        "tab": "8acf4cd8dcadb6ca",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "aa2c7da12e1086a2",
        "type": "ui_group",
        "name": "Feed",
        "tab": "8acf4cd8dcadb6ca",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "0d1a2c0b7eda5eb1",
        "type": "ui_group",
        "name": "Current",
        "tab": "7b0bd463e3250132",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "07c0afe64b480570",
        "type": "ui_group",
        "name": "Update",
        "tab": "7b0bd463e3250132",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e9376441b65f8fa6",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.hivemq.com",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "11fbed7ab203ea7d",
        "type": "ui_group",
        "name": "EmailUpdate",
        "tab": "b04556f58b734d6e",
        "order": 2,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "50a854303ebca012",
        "type": "ui_group",
        "name": "PasswordUpdate",
        "tab": "b04556f58b734d6e",
        "order": 3,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ae58e03e508736ac",
        "type": "ui_group",
        "name": "PinUpdate",
        "tab": "b04556f58b734d6e",
        "order": 4,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2119f505594bdcc1",
        "type": "mongodb3",
        "uri": "mongodb+srv://iot:hcmusiot@hcmusiot.gfzjc3f.mongodb.net/?retryWrites=true&w=majority",
        "name": "smart_pet_feeder",
        "options": "",
        "parallelism": "-1"
    },
    {
        "id": "ce5ab49963467673",
        "type": "ui_tab",
        "d": true,
        "name": "Login",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fa03995da56e803e",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e6b7a06246b867a9",
        "type": "ui_tab",
        "name": "Profile",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "b04556f58b734d6e",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "8acf4cd8dcadb6ca",
        "type": "ui_tab",
        "name": "Device",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "7b0bd463e3250132",
        "type": "ui_tab",
        "name": "Food schedule",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    }
]
